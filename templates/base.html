<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}VelBlog{% endblock title %}</title>

  {% load static %}
  <link rel="stylesheet" href="{% static '/css/style.css' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&family=Outfit:wght@400;700&display=swap"
    rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>

<body>
  <nav class="navbar">
    <div class="container flex justify-between">
      <a class="brand" href="/">VELBLOG</a>

      <div class="nav-links flex">
        <a href="/" {% if request.path == "/" %}class="active" {% endif %}>HOME</a>
        <a href="/about" {% if "/about" in request.path %}class="active" {% endif %}>ABOUT</a>
        <a href="/blog" {% if "/blog" in request.path %}class="active" {% endif %}>BLOG</a>
        <a href="/contact" {% if "/contact" in request.path %}class="active" {% endif %}>CONTACT</a>
        <a href="/billing/pricing" {% if "/billing" in request.path %}class="active" {% endif %}>PRICING</a>
      </div>

      <div class="flex" style="gap: 20px;">
        <!-- Theme Toggle -->
        <button id="theme-toggle" class="btn btn-outline" style="padding: 10px; border: none; font-size: 1.2rem;"
          title="Toggle Theme">
          <i class="fas fa-moon"></i>
        </button>

        {% if user.is_authenticated %}
        <span style="font-weight: bold; text-transform: uppercase;">{{ request.user }}</span>
        <a href="/logout" class="btn btn-outline" style="padding: 10px 20px; font-size: 0.8rem;">LOGOUT</a>
        {% else %}
        <a href="/login" class="btn btn-outline" style="padding: 10px 20px; font-size: 0.8rem;">LOGIN</a>
        <a href="/signup" class="btn btn-primary" style="padding: 10px 20px; font-size: 0.8rem;">SIGN UP</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    {% if messages %}
    {% for message in messages %}
    <div class="alert">
      {{ message }}
    </div>
    {% endfor %}
    {% endif %}

    {% block body %}
    {% endblock body %}
  </div>

  <footer style="border-top: 1px solid var(--border-color); padding: 60px 0; margin-top: 80px; text-align: center;">
    <div class="container">
      <p style="text-transform: uppercase; font-weight: bold;">Â© 2025 VELBLOG. EST. MMXXV</p>
    </div>
  </footer>

  {% block js %}
  {% endblock js %}

  <script>
    const toggleBtn = document.getElementById('theme-toggle');
    const icon = toggleBtn.querySelector('i');
    const html = document.documentElement;

    // Load saved theme
    const savedTheme = localStorage.getItem('theme') || 'light';
    html.setAttribute('data-theme', savedTheme);
    updateIcon(savedTheme);

    toggleBtn.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';

      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateIcon(newTheme);
    });

    function updateIcon(theme) {
      if (theme === 'dark') {
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
      } else {
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
      }
    }
  </script>
</body>

</html>